# Xenon

## Installation

### Dependencies

- [GHC 8.8.4](https://www.haskell.org/ghc/download_ghc_8_8_4.html): Can be
  installed using [ghcup](https://www.haskell.org/ghcup/)
- [z3 v4.8.1](https://github.com/Z3Prover/z3/releases/tag/z3-4.8.1)
- [GLPK (GNU Linear Programming Kit) v.4.65](https://ftp.gnu.org/gnu/glpk/glpk-4.65.tar.gz)
- Ghostscript & Graphviz (required for generating the graphs)

### Building

```sh
# 1. install ghc 8.8.4 using ghcup
open "https://www.haskell.org/ghcup/"

# 2. clone xenon
git clone --recursive https://github.com/gokhankici/xenon.git
cd xenon

# 3. build the Verilog parser
make parser

# 4. build the project
make
```

## Usage

When installed, just run `./xenon`. For the test suite, run `./t`.

For the annotation file format, please take a look at JSON files named
`annot-*.json`, or the JSON parser defined in
`src/Xenon/Language/Annotation.hs`.

### Command Line Options

```
xenon v2.0, (C) Rami Gokhan Kici 2020

Verifies whether the given Verilog file runs in constant time under the given
assumptions.

First positional argument is the verilog file to analyze.
Second positional argument is the JSON file that contains the annotations.

xenon [OPTIONS] VERILOG-FILE ANNOTATION-FILE

     --iverilog-dir=DIR  path of the iverilog-parser directory
     --print-ir          just run the verilog parser
     --vcgen             just generate the .fq file
     --no-save           do not save the fq file
     --no-fp-output      disable the output from fixpoint
     --abduction         run abduction algorithm
     --benchmark-mode    do not run the sanity check step (for benchmarking)
     --delta             run fixpoint in delta debugging mode
     --pretty-prolog     pretty print the IR generated by the Verilog file
                         before parsing
     --print-solution    print the fixpoint solution
  -v --verbose           Loud verbosity
  -q --quiet             Quiet verbosity

--------------------------------------------------------------------------------
Extra arguments:
usage: xenon [-b] [--profile] [--debug] [--help]

optional arguments:
  -b, --build  Build the project
  --profile    Run in profiling mode
  --debug      Run the debugging script
  --help, -h
```

### Example

```sh
./xenon -- examples/verilog/stall.v examples/verilog/annot-stall.json
```
